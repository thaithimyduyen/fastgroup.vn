<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Demo Product Filter</title>
    C√¥ng ty TNHH Ocmoxa
    ƒê∆∞·ªùng
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .product-card img {
            height: 180px;
            object-fit: cover;
        }

        .search-box {
            border-radius: 12px;
            padding: 10px 14px;
            border: 1px solid #ddd;
        }

        .filter-select {
            border-radius: 10px;
            padding: 10px;
        }

        .product-title {
            font-size: 1.1rem;
            font-weight: 600;
        }
    </style>
</head>

<body class="bg-light">

    <div class="container py-5">

        <h2 class="fw-bold mb-4 text-center">Danh S√°ch S·∫£n Ph·∫©m</h2>

        <!-- Search & Filters -->
        <div class="row g-3 mb-4 justify-content-center">
            <div class="col-md-4">
                <input type="text" id="search" class="search-box w-100"
                    placeholder="üîç T√¨m theo t√™n, m√¥ t·∫£ ho·∫∑c m√£ h√†ng...">
            </div>
            <div class="col-md-3">
                <select id="catalog-filter" class="form-select filter-select">
                    <option value="">T·∫•t c·∫£ Catalog</option>
                </select>
            </div>
            <div class="col-md-3">
                <select id="brand-filter" class="form-select filter-select">
                    <option value="">T·∫•t c·∫£ Brand</option>
                </select>
            </div>
        </div>

        <!-- Product List -->
        <div class="row" id="product-list"></div>

    </div>

    <script>
        let products = [];
        let filtered = [];

        // Load JSON data
        fetch('/data/products.json')
            .then(res => res.json())
            .then(data => {
                products = data;
                filtered = data;

                renderFilters();
                renderProducts();
            });

        // Render product cards
        function renderProducts() {
            const container = document.getElementById("product-list");
            container.innerHTML = "";

            if (filtered.length === 0) {
                container.innerHTML = `<p class='text-center text-muted'>Kh√¥ng t√¨m th·∫•y s·∫£n ph·∫©m.</p>`;
                return;
            }

            filtered.forEach(p => {
                container.innerHTML += `
            <div class="col-12 col-md-6 col-lg-3 mb-4">
                <div class="card product-card shadow-sm h-100">
                    <img src="${p.image}" class="card-img-top" alt="${p.name}">
                    <div class="card-body">
                        <div class="product-title">${p.name}</div>
                        <p class="text-muted small mb-2">${p.description}</p>
                        <span class="badge bg-primary">${p.catalog}</span>
                        <span class="badge bg-secondary">${p.brand}</span>
                    </div>
                </div>
            </div>
        `;
            });
        }

        // Render dropdown filters
        function renderFilters() {
            const catalogSelect = document.getElementById("catalog-filter");
            const brandSelect = document.getElementById("brand-filter");

            const catalogs = [...new Set(products.map(p => p.catalog))];
            const brands = [...new Set(products.map(p => p.brand))];

            catalogs.forEach(c => catalogSelect.innerHTML += `<option value="${c}">${c}</option>`);
            brands.forEach(b => brandSelect.innerHTML += `<option value="${b}">${b}</option>`);
        }

        // Apply filtering
        function applyFilters() {
            const search = document.getElementById("search").value.toLowerCase();
            const catalog = document.getElementById("catalog-filter").value;
            const brand = document.getElementById("brand-filter").value;

            filtered = products.filter(p => {
                return (
                    (catalog === "" || p.catalog === catalog) &&
                    (brand === "" || p.brand === brand) &&
                    (
                        p.name.toLowerCase().includes(search) ||
                        p.description.toLowerCase().includes(search) ||
                        p.id.toLowerCase().includes(search)
                    )
                );
            });

            renderProducts();
        }

        // Event listeners
        document.getElementById("search").addEventListener("input", applyFilters);
        document.getElementById("catalog-filter").addEventListener("change", applyFilters);
        document.getElementById("brand-filter").addEventListener("change", applyFilters);
    </script>

</body>

</html>